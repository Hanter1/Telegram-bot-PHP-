# Telegram-bot-PHP

##Основные понятия
API(Application Programming Interface) - это набор способов и правил, по которым различные программы общаются между собой и обмениваются данными

Метод API - это определённое действие, которое должно выполнить приложение основываясь на полученных данных( отправить сообщение, вернуть список чатов, отправить картинку и т.д.)

Token (токен) - это уникальный ключ бота, открывающий доступ к определённым данным. 

---

### Как отправлять HTTP запросы на PHP? 

Для отправки HTTP запросов можно использовать функцию `file_get_contents`, где в качестве первого главного параметра указывается ссылка.
Данная функция отлично подходит для отправки `GET` запросов, но к сожалению с помощью функции `file_get_contents`, нельзя отправлять `POST` запросы

В данном проекте для отправки `POST` запросов я буду использовать библиотеку `Curl`.

Curl - это библиотека предназначенная для получения и передачи данных через такие протоколы, как `HTTP`, `FTP`, `HTTPS`.

---

### Виды взаимодействия с приложением через API 

Существует два вида взаимодействия с приложением через `API`.

- От клиента к серверу.
- От сервера к клиенту.

В моем случае клиентом является приложение (сайт), а в качестве сервера выступает сайт куда я отправляю запросы (telegram).

API запрос - это способ общения с программой, посредствам отправки данных от клиента к серверу.

Hooks(Хуки) - это способ общения с программой, посредствам отправки данных от сервера к клиенту. 
То есть при определённых изменениях в программе, сервер (Telegram) будет отправлять данные на указанный `URL` скрипта на моем сервере (сайте).

---

### Документация для работы с API Telegram

Все методы и параметры для запросов берем из официальной документации телеграмм
- https://tlgrm.ru/docs/bots/api 

---

### Структура URL для отправки запросов в Telegram 

Пример URL для создания запросов к боту
`https://api.telegram.org/bot{token}/{method}`

{token} — это уникальный ключ, который выдаётся при создание бота

{method} — это метод запроса по которому получаем или отправляем данные.

---

### Параметры URL для запросов

Пример отправки сообщений методом GET. Первая часть URL содержит домен `api.telegram.org`, далее прописываем строку `bot` с токеном который нам даётся при создание бота, после чего указываем метод `sendMessage` и перечисляем GET параметры.

`https://api.telegram.org/bot546445612928:AAHjk6643OYgWHim_TICgsaF9NDDVXYnKzA/sendMessage?chat_id=<ID чата>&text=<text>`

Отправка файлов в чат выглядит аналогично, только метод `sendMessage` заменяется на `sendDocument`. И здесь не перечисляются `GET` параметры, после указания метода, так как мы отправляем данные методом `POST`.

`https://api.telegram.org/bot543264456928:AAHjk6643OYgWHim_TICgsaF9NDDVXYnKzA/sendDocument`

Отправка изображений в чат 

`https://api.telegram.org/bot546413456928:AAHjk6643OYgWHim_TICgsaF9NDDVXYnKzA/sendPhoto`